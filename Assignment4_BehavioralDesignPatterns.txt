
Assignment 4 — Behavioral Design Patterns (Java Console Version)
===============================================================

SET A
-----

Q1. Observer Pattern – Weather Station
--------------------------------------
Steps to Solve:
1. Create interfaces Subject and Observer.
2. Create WeatherData class that updates all observers.
3. Create DisplayDevice observer to show new data.

Code:
----- Subject.java -----
import java.util.*;

public interface Subject {
    void registerObserver(Observer o);
    void removeObserver(Observer o);
    void notifyObservers();
}

----- Observer.java -----
public interface Observer {
    void update(float temp, float humidity, float pressure);
}

----- WeatherData.java -----
import java.util.*;

public class WeatherData implements Subject {
    private List<Observer> observers;
    private float temperature;
    private float humidity;
    private float pressure;

    public WeatherData() { observers = new ArrayList<>(); }

    public void registerObserver(Observer o) { observers.add(o); }
    public void removeObserver(Observer o) { observers.remove(o); }
    public void notifyObservers() {
        for (Observer o : observers)
            o.update(temperature, humidity, pressure);
    }

    public void setMeasurements(float t, float h, float p) {
        temperature = t;
        humidity = h;
        pressure = p;
        notifyObservers();
    }
}

----- DisplayDevice.java -----
public class DisplayDevice implements Observer {
    private String name;
    public DisplayDevice(String name) { this.name = name; }
    public void update(float t, float h, float p) {
        System.out.println(name + " display -> Temp: " + t + ", Humidity: " + h + ", Pressure: " + p);
    }
}

----- WeatherStationDemo.java -----
public class WeatherStationDemo {
    public static void main(String[] args) {
        WeatherData weather = new WeatherData();
        DisplayDevice d1 = new DisplayDevice("Mobile");
        DisplayDevice d2 = new DisplayDevice("Web");

        weather.registerObserver(d1);
        weather.registerObserver(d2);

        weather.setMeasurements(30, 65, 1010);
        weather.setMeasurements(28, 70, 1005);
    }
}

------------------------------------------------------

Q2. Command Pattern – Ceiling Fan Undo
--------------------------------------
Steps to Solve:
1. Create Command interface with execute() and undo().
2. Create CeilingFan class with speed control.
3. Implement FanOnCommand and FanOffCommand.
4. Use RemoteControl to trigger commands.

Code:
----- Command.java -----
public interface Command {
    void execute();
    void undo();
}

----- CeilingFan.java -----
public class CeilingFan {
    private String location;
    private int speed;
    public static final int HIGH = 3;
    public static final int MEDIUM = 2;
    public static final int LOW = 1;
    public static final int OFF = 0;

    public CeilingFan(String location) { this.location = location; }

    public void high() { speed = HIGH; System.out.println(location + " fan on high"); }
    public void off() { speed = OFF; System.out.println(location + " fan off"); }
    public int getSpeed() { return speed; }
}

----- FanOnCommand.java -----
public class FanOnCommand implements Command {
    private CeilingFan fan;
    private int prevSpeed;

    public FanOnCommand(CeilingFan fan) { this.fan = fan; }

    public void execute() {
        prevSpeed = fan.getSpeed();
        fan.high();
    }

    public void undo() {
        if (prevSpeed == CeilingFan.OFF) fan.off();
    }
}

----- FanOffCommand.java -----
public class FanOffCommand implements Command {
    private CeilingFan fan;
    private int prevSpeed;

    public FanOffCommand(CeilingFan fan) { this.fan = fan; }

    public void execute() {
        prevSpeed = fan.getSpeed();
        fan.off();
    }

    public void undo() {
        if (prevSpeed == CeilingFan.HIGH) fan.high();
    }
}

----- RemoteControl.java -----
public class RemoteControl {
    private Command slot;
    public void setCommand(Command command) { slot = command; }
    public void pressButton() { slot.execute(); }
    public void pressUndo() { slot.undo(); }
}

----- CommandDemo.java -----
public class CommandDemo {
    public static void main(String[] args) {
        CeilingFan fan = new CeilingFan("Living Room");
        Command on = new FanOnCommand(fan);
        Command off = new FanOffCommand(fan);
        RemoteControl remote = new RemoteControl();

        remote.setCommand(on);
        remote.pressButton();
        remote.pressUndo();

        remote.setCommand(off);
        remote.pressButton();
        remote.pressUndo();
    }
}

------------------------------------------------------

Q3. Chain of Responsibility – Loan Approval
-------------------------------------------
Code:
abstract class Approver {
    protected Approver nextApprover;
    public void setNextApprover(Approver next) { nextApprover = next; }
    public abstract void approveLoan(int amount);
}

class Manager extends Approver {
    public void approveLoan(int amount) {
        if (amount <= 1000)
            System.out.println("Manager approved loan of " + amount);
        else if (nextApprover != null)
            nextApprover.approveLoan(amount);
    }
}

class SeniorManager extends Approver {
    public void approveLoan(int amount) {
        if (amount <= 10000)
            System.out.println("Senior Manager approved loan of " + amount);
        else if (nextApprover != null)
            nextApprover.approveLoan(amount);
    }
}

class Director extends Approver {
    public void approveLoan(int amount) {
        if (amount <= 100000)
            System.out.println("Director approved loan of " + amount);
        else
            System.out.println("Loan request too large to approve");
    }
}

public class LoanApprovalDemo {
    public static void main(String[] args) {
        Approver manager = new Manager();
        Approver senior = new SeniorManager();
        Approver director = new Director();

        manager.setNextApprover(senior);
        senior.setNextApprover(director);

        manager.approveLoan(500);
        manager.approveLoan(8000);
        manager.approveLoan(50000);
    }
}

------------------------------------------------------

SET B
-----

Q1. Memento Pattern – Gumball Machine State
-------------------------------------------
Code:
class Memento {
    private int state;
    public Memento(int state) { this.state = state; }
    public int getState() { return state; }
}

class GumballMachine {
    private int state;
    public void setState(int state) {
        this.state = state;
        System.out.println("State set to: " + state);
    }
    public Memento saveState() { return new Memento(state); }
    public void restoreState(Memento m) {
        state = m.getState();
        System.out.println("Restored to state: " + state);
    }
}

public class MementoDemo {
    public static void main(String[] args) {
        GumballMachine gm = new GumballMachine();
        gm.setState(1);
        Memento m1 = gm.saveState();
        gm.setState(2);
        gm.restoreState(m1);
    }
}

------------------------------------------------------

Q2. Command Pattern – Remote Control
------------------------------------
Code:
interface Device {
    void on();
    void off();
}

class Light implements Device {
    public void on() { System.out.println("Light is ON"); }
    public void off() { System.out.println("Light is OFF"); }
}

class LightOnCommand implements Command {
    private Device light;
    public LightOnCommand(Device light) { this.light = light; }
    public void execute() { light.on(); }
    public void undo() { light.off(); }
}

class LightOffCommand implements Command {
    private Device light;
    public LightOffCommand(Device light) { this.light = light; }
    public void execute() { light.off(); }
    public void undo() { light.on(); }
}

public class RemoteDemo {
    public static void main(String[] args) {
        Device light = new Light();
        Command on = new LightOnCommand(light);
        Command off = new LightOffCommand(light);
        RemoteControl remote = new RemoteControl();

        remote.setCommand(on);
        remote.pressButton();
        remote.pressUndo();

        remote.setCommand(off);
        remote.pressButton();
        remote.pressUndo();
    }
}

------------------------------------------------------

SET C
-----

Q1. Iterator Pattern – Menu Design
----------------------------------
Code:
import java.util.*;

interface Menu {
    Iterator<String> createIterator();
}

class BreakfastMenu implements Menu {
    List<String> items = new ArrayList<>();
    public BreakfastMenu() {
        items.add("Pancakes");
        items.add("Coffee");
    }
    public Iterator<String> createIterator() { return items.iterator(); }
}

class DinnerMenu implements Menu {
    List<String> items = new ArrayList<>();
    public DinnerMenu() {
        items.add("Burger");
        items.add("Fries");
    }
    public Iterator<String> createIterator() { return items.iterator(); }
}

public class IteratorDemo {
    public static void main(String[] args) {
        Menu breakfast = new BreakfastMenu();
        Menu dinner = new DinnerMenu();

        Iterator<String> b = breakfast.createIterator();
        Iterator<String> d = dinner.createIterator();

        System.out.println("Breakfast Menu:");
        while (b.hasNext()) System.out.println(b.next());

        System.out.println("Dinner Menu:");
        while (d.hasNext()) System.out.println(d.next());
    }
}

------------------------------------------------------

HOW TO RUN THE FILES
--------------------
1. Save each .java file with the same name as its public class.
2. Open a terminal in the folder where you saved the files.
3. Compile all files using:
   javac *.java
4. Run the main demo class using:
   java WeatherStationDemo
   java CommandDemo
   java IteratorDemo
5. Observe console outputs for each pattern demonstration.

===============================================================
End of Assignment 4 — Behavioral Design Patterns
===============================================================
