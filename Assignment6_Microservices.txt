
Assignment 6 — Microservices Using Spring Boot
==============================================

SET A
-----

Q1. Product Service Microservice
--------------------------------
Steps to Solve:
1. Create Spring Boot app named ProductService.
2. Define Product model and controller.
3. Create endpoints to add, list, and get products.

Code:
----- Product.java -----
package com.productservice.model;

public class Product {
    private int id;
    private String name;
    private double price;

    public Product(int id, String name, double price) {
        this.id = id;
        this.name = name;
        this.price = price;
    }

    public int getId() { return id; }
    public String getName() { return name; }
    public double getPrice() { return price; }
}

----- ProductController.java -----
package com.productservice.controller;

import org.springframework.web.bind.annotation.*;
import java.util.*;
import com.productservice.model.Product;

@RestController
@RequestMapping("/products")
public class ProductController {
    private List<Product> products = new ArrayList<>();

    @GetMapping
    public List<Product> getAll() { return products; }

    @PostMapping
    public String add(@RequestBody Product p) {
        products.add(p);
        return "Product added successfully";
    }
}

----- ProductServiceApplication.java -----
package com.productservice;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;

@SpringBootApplication
public class ProductServiceApplication {
    public static void main(String[] args) {
        SpringApplication.run(ProductServiceApplication.class, args);
    }
}

------------------------------------------------------

Q2. Order Service Microservice
------------------------------
Code:
----- Order.java -----
package com.orderservice.model;

public class Order {
    private int id;
    private String productName;
    private int quantity;

    public Order(int id, String productName, int quantity) {
        this.id = id;
        this.productName = productName;
        this.quantity = quantity;
    }

    public int getId() { return id; }
    public String getProductName() { return productName; }
    public int getQuantity() { return quantity; }
}

----- OrderController.java -----
package com.orderservice.controller;

import org.springframework.web.bind.annotation.*;
import org.springframework.web.client.RestTemplate;
import java.util.*;
import com.orderservice.model.Order;

@RestController
@RequestMapping("/orders")
public class OrderController {
    private List<Order> orders = new ArrayList<>();
    private RestTemplate restTemplate = new RestTemplate();

    @PostMapping
    public String add(@RequestBody Order o) {
        orders.add(o);
        return "Order added";
    }

    @GetMapping
    public List<Order> getAll() { return orders; }

    @GetMapping("/products")
    public Object getProducts() {
        String url = "http://localhost:8081/products";
        return restTemplate.getForObject(url, Object.class);
    }
}

----- OrderServiceApplication.java -----
package com.orderservice;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;

@SpringBootApplication
public class OrderServiceApplication {
    public static void main(String[] args) {
        SpringApplication.run(OrderServiceApplication.class, args);
    }
}

------------------------------------------------------

Q3. User Service Microservice
-----------------------------
Code:
----- User.java -----
package com.userservice.model;

public class User {
    private int id;
    private String name;
    private String email;

    public User(int id, String name, String email) {
        this.id = id;
        this.name = name;
        this.email = email;
    }

    public int getId() { return id; }
    public String getName() { return name; }
    public String getEmail() { return email; }
}

----- UserController.java -----
package com.userservice.controller;

import org.springframework.web.bind.annotation.*;
import java.util.*;
import com.userservice.model.User;

@RestController
@RequestMapping("/users")
public class UserController {
    private List<User> users = new ArrayList<>();

    @GetMapping
    public List<User> getAll() { return users; }

    @PostMapping
    public String add(@RequestBody User u) {
        users.add(u);
        return "User registered successfully";
    }
}

----- UserServiceApplication.java -----
package com.userservice;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;

@SpringBootApplication
public class UserServiceApplication {
    public static void main(String[] args) {
        SpringApplication.run(UserServiceApplication.class, args);
    }
}

------------------------------------------------------

SET B
-----

Q1. Communication Between Microservices
---------------------------------------
Code:
----- UserOrderController.java -----
package com.orderservice.controller;

import org.springframework.web.bind.annotation.*;
import org.springframework.web.client.RestTemplate;
import java.util.*;

@RestController
@RequestMapping("/user-orders")
public class UserOrderController {
    private RestTemplate restTemplate = new RestTemplate();

    @GetMapping("/users")
    public Object getUsers() {
        String url = "http://localhost:8082/users";
        return restTemplate.getForObject(url, Object.class);
    }
}

------------------------------------------------------

Q2. Eureka Server Setup
-----------------------
Code:
----- EurekaServerApplication.java -----
package com.discoveryserver;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.cloud.netflix.eureka.server.EnableEurekaServer;

@SpringBootApplication
@EnableEurekaServer
public class EurekaServerApplication {
    public static void main(String[] args) {
        SpringApplication.run(EurekaServerApplication.class, args);
    }
}

application.properties
----------------------
server.port=8761
eureka.client.register-with-eureka=false
eureka.client.fetch-registry=false

------------------------------------------------------

Q3. API Gateway
---------------
Code:
----- ApiGatewayApplication.java -----
package com.apigateway;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.cloud.gateway.route.RouteLocator;
import org.springframework.cloud.gateway.route.builder.RouteLocatorBuilder;
import org.springframework.context.annotation.Bean;

@SpringBootApplication
public class ApiGatewayApplication {
    public static void main(String[] args) {
        SpringApplication.run(ApiGatewayApplication.class, args);
    }

    @Bean
    public RouteLocator routeLocator(RouteLocatorBuilder builder) {
        return builder.routes()
            .route("product_route", r -> r.path("/products/**").uri("http://localhost:8081"))
            .route("order_route", r -> r.path("/orders/**").uri("http://localhost:8083"))
            .route("user_route", r -> r.path("/users/**").uri("http://localhost:8082"))
            .build();
    }
}

------------------------------------------------------

SET C
-----

Q1. Microservice Integration Demo
---------------------------------
Code:
----- IntegrationController.java -----
package com.integration.controller;

import org.springframework.web.bind.annotation.*;
import org.springframework.web.client.RestTemplate;
import java.util.*;

@RestController
@RequestMapping("/integration")
public class IntegrationController {
    private RestTemplate restTemplate = new RestTemplate();

    @GetMapping("/summary")
    public Map<String, Object> getSummary() {
        Map<String, Object> summary = new HashMap<>();
        summary.put("users", restTemplate.getForObject("http://localhost:8082/users", Object.class));
        summary.put("products", restTemplate.getForObject("http://localhost:8081/products", Object.class));
        summary.put("orders", restTemplate.getForObject("http://localhost:8083/orders", Object.class));
        return summary;
    }
}

------------------------------------------------------

HOW TO RUN THE FILES
--------------------
1. Install Java 17+ and Spring Boot.
2. Create three projects:
   - ProductService → port 8081
   - UserService → port 8082
   - OrderService → port 8083
3. Optional: Run Eureka Server on port 8761.
4. Run each project using:
   mvn spring-boot:run
5. Test endpoints in browser or Postman:
   - http://localhost:8081/products
   - http://localhost:8082/users
   - http://localhost:8083/orders
   - http://localhost:8080/integration/summary

==============================================
End of Assignment 6 — Microservices Using Spring Boot
==============================================
